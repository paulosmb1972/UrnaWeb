<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UrnaWeb Digital</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --primary: #1abc9c; --dark: #0a2a66; --accent: #f1c40f; --danger: #e74c3c; --success: #2ecc71; }
        body { margin: 0; font-family: 'Segoe UI', Arial, sans-serif; background: var(--dark); color: white; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .screen { display: none; padding: 20px; width: 100%; max-width: 800px; box-sizing: border-box; }
        .active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* Blocos Informativos */
        .info-box { text-align: center; font-size: 14px; color: #eee; margin: 15px 0; line-height: 1.4; background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 8px; border-left: 5px solid var(--accent); }
        
        input, button, textarea { width: 100%; padding: 15px; margin: 10px 0; border-radius: 8px; border: none; font-size: 16px; box-sizing: border-box; }
        button { background: var(--primary); color: white; font-weight: bold; cursor: pointer; transition: 0.2s; }
        
        .lang-box { position: fixed; top: 10px; right: 10px; z-index: 100; display: flex; gap: 5px; }
        .lang-box button { width: auto; padding: 6px 12px; background: rgba(0,0,0,0.6); font-size: 11px; border: 1px solid var(--primary); }
    </style>
</head>
<body>

    <div class="lang-box">
        <button onclick="window.TR('pt')">Português</button>
        <button onclick="window.TR('en')">English</button>
        <button onclick="window.TR('es')">Español</button>
    </div>

    <div id="login" class="screen active">
        <h2 id="L1">Acesso ao Sistema</h2>
        <div class="info-box" id="INFO_GMAIL">Para acesso ao sistema e recebimento seguro do código, deve ser informado apenas o Gmail.</div>
        <input id="uE" type="email" placeholder="Seu Gmail (ex: usuario@gmail.com)">
        <button onclick="window.V()" id="L2">Entrar</button>
    </div>

    <div id="pay" class="screen">
        <h2 id="P1" style="color:var(--danger)">Limite Atingido</h2>
        <p style="text-align:center" id="PL">Escolha um plano para continuar:</p>
        <button id="B1" onclick="window.open('https://mpago.la/2maEAFx')" style="background:var(--success)">Eleição Única (R$ 30,00)</button>
        <button id="B2" onclick="window.open('https://mpago.la/1VakcdN')" style="background:#2980b9">Pacote 20 Eleições (R$ 500,00)</button>
        
        <div class="info-box" id="INFO_PAY">Você atingiu o limite de 3 eleições gratuitas. Utilize um dos botões acima ou insira um cupom.</div>
        <input id="cup" type="text" placeholder="Cupom ou Senha Admin">
        <button onclick="window.K()" id="P2" style="background:var(--accent); color:#000">Ativar Acesso</button>
    </div>

    <div id="setup" class="screen">
        <h2 id="S1">Configurar Eleição</h2>
        <div class="info-box" id="INFO_SETUP">Dê um nome para identificar sua eleição (Ex: Eleição de Condomínio).</div>
        <input id="tE" type="text" placeholder="Nome da Eleição">
        <button onclick="window.N()" id="S2">Próximo</button>
    </div>

    <div id="setupCargo" class="screen">
        <h2 id="C1">Cadastro</h2>
        <div class="info-box" id="INFO_CARGO">Defina o cargo e quantos votos cada eleitor pode dar para esta categoria.</div>
        <input id="nC" type="text" placeholder="Nome do Cargo (Ex: Presidente)">
        <input id="qV" type="number" value="1">
        <hr>
        <input id="nCand" type="text" placeholder="Nome do Candidato">
        <button onclick="window.A()" id="C2">Adicionar Candidato</button>
        <div id="listTemp" style="text-align:center; color:var(--accent); margin:10px 0;"></div>
        <button onclick="window.SAVE()" id="C3" style="background:var(--success)">Salvar Cargo</button>
        <button onclick="window.START()" id="C4" style="background:var(--primary); margin-top:30px">INICIAR VOTAÇÃO</button>
    </div>

    <script>
        (function(){
            const _0x4f2a = { s:'service_oqfbzrm', t:'template_t3aio8f', k:'_PKL4Oj92o48KurSF', u:'https://urnaweb-backend.paulosmb1972.workers.dev' };
            emailjs.init(_0x4f2a.k);
            let _0x1a2b='', _0x2b3c='', _idioma='pt';
            
            const _0x0d1e = {
                pt: {
                    uE: "Seu Gmail (ex: usuario@gmail.com)",
                    L1: "Acesso ao Sistema", L2: "Entrar",
                    INFO_GMAIL: "Para acesso ao sistema e recebimento seguro do código, deve ser informado apenas o Gmail.",
                    P1: "Limite Atingido", PL: "Escolha um plano para continuar:",
                    B1: "Eleição Única (R$ 30,00)", B2: "Pacote 20 Eleições (R$ 500,00)",
                    INFO_PAY: "Você atingiu o limite de 3 eleições gratuitas. Utilize um dos botões acima ou insira um cupom.",
                    cup: "Cupom ou Senha Admin", P2: "Ativar Acesso",
                    S1: "Configurar Eleição", INFO_SETUP: "Dê um nome para identificar sua eleição (Ex: Eleição de Condomínio).",
                    tE: "Nome da Eleição", S2: "Próximo",
                    C1: "Cadastro", INFO_CARGO: "Defina o cargo e quantos votos cada eleitor pode dar para esta categoria.",
                    nC: "Nome do Cargo (Ex: Presidente)", nCand: "Nome do Candidato",
                    C2: "Adicionar Candidato", C3: "Salvar Cargo", C4: "INICIAR VOTAÇÃO"
                },
                en: {
                    uE: "Your Gmail (e.g., user@gmail.com)",
                    L1: "System Access", L2: "Login",
                    INFO_GMAIL: "To access the system and receive the code securely, only Gmail accounts must be used.",
                    P1: "Limit Reached", PL: "Choose a plan to continue:",
                    B1: "Single Election (R$ 30.00)", B2: "20 Elections Pack (R$ 500.00)",
                    INFO_PAY: "You have reached the limit of 3 free elections. Use one of the buttons above or enter a coupon.",
                    cup: "Coupon or Admin Password", P2: "Activate Access",
                    S1: "Election Setup", INFO_SETUP: "Enter a name to identify your election (e.g., HOA Election).",
                    tE: "Election Title", S2: "Next",
                    C1: "Registration", INFO_CARGO: "Define the position and how many votes each voter can cast for this category.",
                    nC: "Position Name (e.g., President)", nCand: "Candidate Name",
                    C2: "Add Candidate", C3: "Save Position", C4: "START VOTING"
                },
                es: {
                    uE: "Tu Gmail (ej: usuario@gmail.com)",
                    L1: "Acceso al Sistema", L2: "Entrar",
                    INFO_GMAIL: "Para acceder al sistema y recibir el código de forma segura, solo se deben informar cuentas de Gmail.",
                    P1: "Límite Alcanzado", PL: "Elija un plan para continuar:",
                    B1: "Elección Única (R$ 30.00)", B2: "Paquete de 20 Elecciones (R$ 500.00)",
                    INFO_PAY: "Ha alcanzado el límite de 3 elecciones gratuitas. Use uno de los botones de arriba o ingrese un cupón.",
                    cup: "Cupón o Contraseña de Administrador", P2: "Activar Acceso",
                    S1: "Configurar Elección", INFO_SETUP: "Asigne un nombre para identificar su elección (Ej: Elección de Condominio).",
                    tE: "Nombre de la Elección", S2: "Siguiente",
                    C1: "Registro", INFO_CARGO: "Defina el cargo y cuántos votos pode dar cada elector para esta categoría.",
                    nC: "Nombre del Cargo (Ej: Presidente)", nCand: "Nombre del Candidato",
                    C2: "Agregar Candidato", C3: "Guardar Cargo", C4: "INICIAR VOTACIÓN"
                }
            };

            window.TR = (lang) => {
                _idioma = lang;
                for(let k in _0x0d1e[lang]){
                    let el = document.getElementById(k);
                    if(el) {
                        if(el.tagName === 'INPUT') el.placeholder = _0x0d1e[lang][k];
                        else el.innerText = _0x0d1e[lang][k];
                    }
                }
            };
            
            // ... (Restante das funções V, C, K, N, A, etc mantidas como antes)
            window.TR('pt');
        })();
    </script>
</body>
</html>
